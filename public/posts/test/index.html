<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>My Second Post | </title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Introduction This is bold text, and this is emphasized text.
常用用法 1、预定义宏 总结： PROJECT_SOURCE_DIR 讲解： CMake 提供了一些预定义的宏（变量），这些宏在项目配置和生成过程中提供有用的信息。以下是一些常用的预定义宏及其用途：
CMake版本信息 CMAKE_MAJOR_VERSION: CMake 的主版本号。 CMAKE_MINOR_VERSION: CMake 的次版本号。 CMAKE_PATCH_VERSION: CMake 的补丁版本号。 CMAKE_VERSION: CMake 的完整版本号（格式为 major.minor.patch）。 message(STATUS &#34;CMake version: ${CMAKE_VERSION}&#34;) 系统信息 CMAKE_SYSTEM: 操作系统的名称，格式为 &lt;OS&gt;-&lt;CPU&gt;。 CMAKE_SYSTEM_NAME: 操作系统的名称，如 Linux、Windows、Darwin。 CMAKE_SYSTEM_VERSION: 操作系统的版本号。 CMAKE_SYSTEM_PROCESSOR: 处理器名称，如 x86_64、armv7l。 message(STATUS &#34;System: ${CMAKE_SYSTEM_NAME} ${CMAKE_SYSTEM_VERSION}&#34;) message(STATUS &#34;Processor: ${CMAKE_SYSTEM_PROCESSOR}&#34;) 项目信息 CMAKE_PROJECT_NAME: 最顶层的 CMake 项目名称（即 project() 指令指定的名称）。 CMAKE_PROJECT_VERSION: 项目的完整版本号（如果使用 project(VERSION) 指定）。 CMAKE_PROJECT_VERSION_MAJOR: 项目的主版本号。 CMAKE_PROJECT_VERSION_MINOR: 项目的次版本号。 CMAKE_PROJECT_VERSION_PATCH: 项目的补丁版本号。 project(MyProject VERSION 1.">
    <meta name="generator" content="Hugo 0.127.0">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="/posts/test/">
    

    <meta property="og:url" content="/posts/test/">
  <meta property="og:title" content="My Second Post">
  <meta property="og:description" content="Introduction This is bold text, and this is emphasized text.
常用用法 1、预定义宏 总结： PROJECT_SOURCE_DIR 讲解： CMake 提供了一些预定义的宏（变量），这些宏在项目配置和生成过程中提供有用的信息。以下是一些常用的预定义宏及其用途：
CMake版本信息 CMAKE_MAJOR_VERSION: CMake 的主版本号。 CMAKE_MINOR_VERSION: CMake 的次版本号。 CMAKE_PATCH_VERSION: CMake 的补丁版本号。 CMAKE_VERSION: CMake 的完整版本号（格式为 major.minor.patch）。 message(STATUS &#34;CMake version: ${CMAKE_VERSION}&#34;) 系统信息 CMAKE_SYSTEM: 操作系统的名称，格式为 &lt;OS&gt;-&lt;CPU&gt;。 CMAKE_SYSTEM_NAME: 操作系统的名称，如 Linux、Windows、Darwin。 CMAKE_SYSTEM_VERSION: 操作系统的版本号。 CMAKE_SYSTEM_PROCESSOR: 处理器名称，如 x86_64、armv7l。 message(STATUS &#34;System: ${CMAKE_SYSTEM_NAME} ${CMAKE_SYSTEM_VERSION}&#34;) message(STATUS &#34;Processor: ${CMAKE_SYSTEM_PROCESSOR}&#34;) 项目信息 CMAKE_PROJECT_NAME: 最顶层的 CMake 项目名称（即 project() 指令指定的名称）。 CMAKE_PROJECT_VERSION: 项目的完整版本号（如果使用 project(VERSION) 指定）。 CMAKE_PROJECT_VERSION_MAJOR: 项目的主版本号。 CMAKE_PROJECT_VERSION_MINOR: 项目的次版本号。 CMAKE_PROJECT_VERSION_PATCH: 项目的补丁版本号。 project(MyProject VERSION 1.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-14T07:07:07+01:00">
    <meta property="article:modified_time" content="2024-01-14T07:07:07+01:00">

  <meta itemprop="name" content="My Second Post">
  <meta itemprop="description" content="Introduction This is bold text, and this is emphasized text.
常用用法 1、预定义宏 总结： PROJECT_SOURCE_DIR 讲解： CMake 提供了一些预定义的宏（变量），这些宏在项目配置和生成过程中提供有用的信息。以下是一些常用的预定义宏及其用途：
CMake版本信息 CMAKE_MAJOR_VERSION: CMake 的主版本号。 CMAKE_MINOR_VERSION: CMake 的次版本号。 CMAKE_PATCH_VERSION: CMake 的补丁版本号。 CMAKE_VERSION: CMake 的完整版本号（格式为 major.minor.patch）。 message(STATUS &#34;CMake version: ${CMAKE_VERSION}&#34;) 系统信息 CMAKE_SYSTEM: 操作系统的名称，格式为 &lt;OS&gt;-&lt;CPU&gt;。 CMAKE_SYSTEM_NAME: 操作系统的名称，如 Linux、Windows、Darwin。 CMAKE_SYSTEM_VERSION: 操作系统的版本号。 CMAKE_SYSTEM_PROCESSOR: 处理器名称，如 x86_64、armv7l。 message(STATUS &#34;System: ${CMAKE_SYSTEM_NAME} ${CMAKE_SYSTEM_VERSION}&#34;) message(STATUS &#34;Processor: ${CMAKE_SYSTEM_PROCESSOR}&#34;) 项目信息 CMAKE_PROJECT_NAME: 最顶层的 CMake 项目名称（即 project() 指令指定的名称）。 CMAKE_PROJECT_VERSION: 项目的完整版本号（如果使用 project(VERSION) 指定）。 CMAKE_PROJECT_VERSION_MAJOR: 项目的主版本号。 CMAKE_PROJECT_VERSION_MINOR: 项目的次版本号。 CMAKE_PROJECT_VERSION_PATCH: 项目的补丁版本号。 project(MyProject VERSION 1.">
  <meta itemprop="datePublished" content="2024-01-14T07:07:07+01:00">
  <meta itemprop="dateModified" content="2024-01-14T07:07:07+01:00">
  <meta itemprop="wordCount" content="756">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="My Second Post">
  <meta name="twitter:description" content="Introduction This is bold text, and this is emphasized text.
常用用法 1、预定义宏 总结： PROJECT_SOURCE_DIR 讲解： CMake 提供了一些预定义的宏（变量），这些宏在项目配置和生成过程中提供有用的信息。以下是一些常用的预定义宏及其用途：
CMake版本信息 CMAKE_MAJOR_VERSION: CMake 的主版本号。 CMAKE_MINOR_VERSION: CMake 的次版本号。 CMAKE_PATCH_VERSION: CMake 的补丁版本号。 CMAKE_VERSION: CMake 的完整版本号（格式为 major.minor.patch）。 message(STATUS &#34;CMake version: ${CMAKE_VERSION}&#34;) 系统信息 CMAKE_SYSTEM: 操作系统的名称，格式为 &lt;OS&gt;-&lt;CPU&gt;。 CMAKE_SYSTEM_NAME: 操作系统的名称，如 Linux、Windows、Darwin。 CMAKE_SYSTEM_VERSION: 操作系统的版本号。 CMAKE_SYSTEM_PROCESSOR: 处理器名称，如 x86_64、armv7l。 message(STATUS &#34;System: ${CMAKE_SYSTEM_NAME} ${CMAKE_SYSTEM_VERSION}&#34;) message(STATUS &#34;Processor: ${CMAKE_SYSTEM_PROCESSOR}&#34;) 项目信息 CMAKE_PROJECT_NAME: 最顶层的 CMake 项目名称（即 project() 指令指定的名称）。 CMAKE_PROJECT_VERSION: 项目的完整版本号（如果使用 project(VERSION) 指定）。 CMAKE_PROJECT_VERSION_MAJOR: 项目的主版本号。 CMAKE_PROJECT_VERSION_MINOR: 项目的次版本号。 CMAKE_PROJECT_VERSION_PATCH: 项目的补丁版本号。 project(MyProject VERSION 1.">

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        
      
    </a>
    <div class="flex-l items-center">
      

      
      
<div class="ananke-socials">
  
</div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
  </div>


      <h1 class="f1 athelas mt3 mb1">My Second Post</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2024-01-14T07:07:07+01:00">January 14, 2024</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><h2 id="introduction">Introduction</h2>
<p>This is <strong>bold</strong> text, and this is <em>emphasized</em> text.</p>
<h1 id="常用用法">常用用法</h1>
<h2 id="1预定义宏">1、预定义宏</h2>
<h3 id="总结">总结：</h3>
<pre tabindex="0"><code>PROJECT_SOURCE_DIR
</code></pre><h3 id="讲解">讲解：</h3>
<p>CMake 提供了一些预定义的宏（变量），这些宏在项目配置和生成过程中提供有用的信息。以下是一些常用的预定义宏及其用途：</p>
<h4 id="cmake版本信息">CMake版本信息</h4>
<ul>
<li><strong><code>CMAKE_MAJOR_VERSION</code></strong>: CMake 的主版本号。</li>
<li><strong><code>CMAKE_MINOR_VERSION</code></strong>: CMake 的次版本号。</li>
<li><strong><code>CMAKE_PATCH_VERSION</code></strong>: CMake 的补丁版本号。</li>
<li><strong><code>CMAKE_VERSION</code></strong>: CMake 的完整版本号（格式为 <code>major.minor.patch</code>）。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;CMake version: ${CMAKE_VERSION}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h4 id="系统信息">系统信息</h4>
<ul>
<li><strong><code>CMAKE_SYSTEM</code></strong>: 操作系统的名称，格式为 <code>&lt;OS&gt;-&lt;CPU&gt;</code>。</li>
<li><strong><code>CMAKE_SYSTEM_NAME</code></strong>: 操作系统的名称，如 <code>Linux</code>、<code>Windows</code>、<code>Darwin</code>。</li>
<li><strong><code>CMAKE_SYSTEM_VERSION</code></strong>: 操作系统的版本号。</li>
<li><strong><code>CMAKE_SYSTEM_PROCESSOR</code></strong>: 处理器名称，如 <code>x86_64</code>、<code>armv7l</code>。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;System: ${CMAKE_SYSTEM_NAME} ${CMAKE_SYSTEM_VERSION}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Processor: ${CMAKE_SYSTEM_PROCESSOR}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h4 id="项目信息">项目信息</h4>
<ul>
<li><strong><code>CMAKE_PROJECT_NAME</code></strong>: 最顶层的 CMake 项目名称（即 <code>project()</code> 指令指定的名称）。</li>
<li><strong><code>CMAKE_PROJECT_VERSION</code></strong>: 项目的完整版本号（如果使用 <code>project(VERSION)</code> 指定）。</li>
<li><strong><code>CMAKE_PROJECT_VERSION_MAJOR</code></strong>: 项目的主版本号。</li>
<li><strong><code>CMAKE_PROJECT_VERSION_MINOR</code></strong>: 项目的次版本号。</li>
<li><strong><code>CMAKE_PROJECT_VERSION_PATCH</code></strong>: 项目的补丁版本号。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>project(<span style="color:#e6db74">MyProject</span> <span style="color:#e6db74">VERSION</span> <span style="color:#e6db74">1.2.3</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Project name: ${CMAKE_PROJECT_NAME}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Project version: ${CMAKE_PROJECT_VERSION}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h4 id="编译器信息">编译器信息</h4>
<ul>
<li><strong><code>CMAKE_C_COMPILER</code></strong>: C 编译器的路径。</li>
<li><strong><code>CMAKE_CXX_COMPILER</code></strong>: C++ 编译器的路径。</li>
<li><strong><code>CMAKE_C_COMPILER_ID</code></strong>: C 编译器的标识符，如 <code>GNU</code>、<code>Clang</code>、<code>MSVC</code>。</li>
<li><strong><code>CMAKE_CXX_COMPILER_ID</code></strong>: C++ 编译器的标识符。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;C Compiler: ${CMAKE_C_COMPILER} (${CMAKE_C_COMPILER_ID})&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;C++ Compiler: ${CMAKE_CXX_COMPILER} (${CMAKE_CXX_COMPILER_ID})&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h4 id="构建目录信息">构建目录信息</h4>
<ul>
<li><strong><code>CMAKE_SOURCE_DIR</code></strong>: 最顶层 CMakeLists.txt 所在的目录。</li>
<li><strong><code>CMAKE_BINARY_DIR</code></strong>: 运行 CMake 时生成的构建目录。</li>
<li><strong><code>CMAKE_CURRENT_SOURCE_DIR</code></strong>: 当前处理的 CMakeLists.txt 所在的目录。</li>
<li><strong><code>CMAKE_CURRENT_BINARY_DIR</code></strong>: 当前处理的构建目录。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Source dir: ${CMAKE_SOURCE_DIR}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Binary dir: ${CMAKE_BINARY_DIR}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h4 id="其他有用的宏">其他有用的宏</h4>
<ul>
<li><strong><code>CMAKE_BUILD_TYPE</code></strong>: 当前的构建类型（如 <code>Debug</code>、<code>Release</code>）。</li>
<li><strong><code>CMAKE_INSTALL_PREFIX</code></strong>: 安装前缀（默认是 <code>/usr/local</code>）。</li>
<li><strong><code>CMAKE_MODULE_PATH</code></strong>: 用于搜索模块文件的路径列表。</li>
<li><strong><code>CMAKE_PREFIX_PATH</code></strong>: 用于搜索软件包的路径前缀列表。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Build type: ${CMAKE_BUILD_TYPE}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Install prefix: ${CMAKE_INSTALL_PREFIX}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h4 id="检查变量是否定义">检查变量是否定义</h4>
<ul>
<li><strong><code>DEFINED</code></strong>: 检查一个变量是否已定义。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>if(<span style="color:#e6db74">DEFINED</span> <span style="color:#e6db74">SOME_VARIABLE</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>    message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;SOME_VARIABLE is defined&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>else()<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>    message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;SOME_VARIABLE is not defined&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>endif()<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h4 id="示例">示例</h4>
<p>下面是一个示例 CMakeLists.txt，展示了如何使用这些预定义宏：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>cmake_minimum_required(<span style="color:#e6db74">VERSION</span> <span style="color:#e6db74">3.10</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>project(<span style="color:#e6db74">MyProject</span> <span style="color:#e6db74">VERSION</span> <span style="color:#e6db74">1.2.3</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;CMake version: ${CMAKE_VERSION}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;System: ${CMAKE_SYSTEM_NAME} ${CMAKE_SYSTEM_VERSION}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Processor: ${CMAKE_SYSTEM_PROCESSOR}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Project name: ${CMAKE_PROJECT_NAME}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Project version: ${CMAKE_PROJECT_VERSION}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;C Compiler: ${CMAKE_C_COMPILER} (${CMAKE_C_COMPILER_ID})&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;C++ Compiler: ${CMAKE_CXX_COMPILER} (${CMAKE_CXX_COMPILER_ID})&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Source dir: ${CMAKE_SOURCE_DIR}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Binary dir: ${CMAKE_BINARY_DIR}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Build type: ${CMAKE_BUILD_TYPE}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Install prefix: ${CMAKE_INSTALL_PREFIX}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>if(<span style="color:#e6db74">DEFINED</span> <span style="color:#e6db74">SOME_VARIABLE</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>    message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;SOME_VARIABLE is defined&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>else()<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>    message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;SOME_VARIABLE is not defined&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>endif()<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p>这个示例会输出CMake的版本、系统信息、项目名称和版本、编译器信息、源代码和构建目录路径、构建类型以及安装前缀。如果定义了 <code>SOME_VARIABLE</code>，还会输出其状态。通过这些预定义宏，可以更方便地调试和配置CMake项目。</p>
<h2 id="2message">2、message</h2>
<h3 id="总结-1">总结：</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#a6e22e">message</span>(STATUS <span style="color:#e6db74">&#34;PROJECT_SOURCE_DIR: &#34;</span> <span style="color:#960050;background-color:#1e0010">$</span>{PROJECT_SOURCE_DIR})
</span></span></code></pre></div><h3 id="讲解-1">讲解：</h3>
<p><code>CMake</code>中的<code>message()</code>命令用于在配置和生成过程的不同阶段向用户输出消息。它可以用于调试、状态报告或输出错误和警告。以下是<code>message()</code>命令的用法和常见选项：</p>
<h4 id="基本语法">基本语法</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>message(<span style="color:#e6db74">&lt;mode&gt;</span> <span style="color:#e6db74">&#34;message to display&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h4 id="模式选项">模式选项</h4>
<ol>
<li>
<p><strong>STATUS</strong>: 输出一般信息。默认情况下，这些消息会显示在终端中。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;This is a status message.&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div></li>
<li>
<p><strong>WARNING</strong>: 输出警告消息。这些消息表示一个潜在的问题，但不会停止配置过程。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>message(<span style="color:#e6db74">WARNING</span> <span style="color:#e6db74">&#34;This is a warning message.&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div></li>
<li>
<p><strong>AUTHOR_WARNING</strong>: 输出作者级别的警告消息。这些消息是专门给项目维护者和作者看的。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>message(<span style="color:#e6db74">AUTHOR_WARNING</span> <span style="color:#e6db74">&#34;This is an author warning message.&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div></li>
<li>
<p><strong>SEND_ERROR</strong>: 输出错误消息，并停止配置过程。生成阶段将不会继续。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>message(<span style="color:#e6db74">SEND_ERROR</span> <span style="color:#e6db74">&#34;This is an error message.&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div></li>
<li>
<p><strong>FATAL_ERROR</strong>: 输出致命错误消息，并立即停止CMake过程。这会立即中止配置和生成。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>message(<span style="color:#e6db74">FATAL_ERROR</span> <span style="color:#e6db74">&#34;This is a fatal error message.&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div></li>
<li>
<p><strong>DEPRECATION</strong>: 输出弃用警告消息，通常用于表示某个功能或命令在未来版本中将不再支持。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>message(<span style="color:#e6db74">DEPRECATION</span> <span style="color:#e6db74">&#34;This is a deprecation warning.&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div></li>
</ol>
<h4 id="例子">例子</h4>
<h4 id="打印状态消息">打印状态消息</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Starting the build process&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h4 id="打印变量值调试">打印变量值（调试）</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>set(<span style="color:#e6db74">MY_VAR</span> <span style="color:#e6db74">&#34;Hello, CMake!&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;MY_VAR is set to ${MY_VAR}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h4 id="打印警告消息">打印警告消息</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>message(<span style="color:#e6db74">WARNING</span> <span style="color:#e6db74">&#34;This feature is experimental and might not work as expected.&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h4 id="打印错误消息并停止配置">打印错误消息并停止配置</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>if(<span style="color:#e6db74">NOT</span> <span style="color:#e6db74">DEFINED</span> <span style="color:#e6db74">SOME_REQUIRED_VARIABLE</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>    message(<span style="color:#e6db74">FATAL_ERROR</span> <span style="color:#e6db74">&#34;SOME_REQUIRED_VARIABLE is not set. Please define it before running CMake.&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>endif()<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h4 id="打印弃用警告">打印弃用警告</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>message(<span style="color:#e6db74">DEPRECATION</span> <span style="color:#e6db74">&#34;This function is deprecated and will be removed in future releases.&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h3 id="高级用法">高级用法</h3>
<h4 id="控制消息的显示条件">控制消息的显示条件</h4>
<p>你可以使用条件语句来控制消息的显示。例如，只在调试模式下显示消息：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>if(<span style="color:#e6db74">CMAKE_BUILD_TYPE</span> <span style="color:#e6db74">STREQUAL</span> <span style="color:#e6db74">&#34;Debug&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>    message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;This is a debug build.&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>endif()<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h4 id="多行消息">多行消息</h4>
<p>CMake的<code>message()</code>命令也支持多行消息输出：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;This is a multi-line message.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Line 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Line 2
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Line 3&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h3 id="总结-2">总结</h3>
<p><code>message()</code>命令是CMake中一个非常有用的工具，它不仅可以帮助调试和记录信息，还可以在构建过程中向用户传达重要的状态、警告和错误消息。通过适当的使用，可以大大提高构建脚本的可读性和可维护性。</p>
<h2 id="3如何获取头文件和源代码文件">3、如何获取头文件和源代码文件</h2>
<p>在CMake中，可以使用一些变量和命令来获取项目中的头文件和源代码文件。这些文件通常会存放在变量中，然后传递给 <code>target_include_directories</code>、<code>target_sources</code> 或 <code>add_executable</code>/<code>add_library</code> 命令。</p>
<p>以下是一个示例，展示如何使用CMake获取头文件和源代码文件：</p>
<h3 id="示例项目结构">示例项目结构</h3>
<p>假设你的项目结构如下：</p>
<pre tabindex="0"><code>MyProject/
├── CMakeLists.txt
├── include/
│   ├── MyProject/
│   │   ├── header1.h
│   │   └── header2.h
├── src/
│   ├── main.cpp
│   ├── source1.cpp
│   └── source2.cpp
└── tests/
    ├── test1.cpp
    └── test2.cpp
</code></pre><h3 id="cmakeliststxt-内容">CMakeLists.txt 内容</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>cmake_minimum_required(<span style="color:#e6db74">VERSION</span> <span style="color:#e6db74">3.10</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>project(<span style="color:#e6db74">MyProject</span> <span style="color:#e6db74">VERSION</span> <span style="color:#e6db74">1.0</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># 设置C++标准
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>set(<span style="color:#e6db74">CMAKE_CXX_STANDARD</span> <span style="color:#e6db74">11</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>set(<span style="color:#e6db74">CMAKE_CXX_STANDARD_REQUIRED</span> <span style="color:#e6db74">True</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># 获取头文件
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>file(<span style="color:#e6db74">GLOB_RECURSE</span> <span style="color:#e6db74">HEADER_FILES</span> <span style="color:#f92672">${</span>CMAKE_SOURCE_DIR<span style="color:#f92672">}</span><span style="color:#e6db74">/include/MyProject/*.h</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># 获取源代码文件
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>file(<span style="color:#e6db74">GLOB_RECURSE</span> <span style="color:#e6db74">SOURCE_FILES</span> <span style="color:#f92672">${</span>CMAKE_SOURCE_DIR<span style="color:#f92672">}</span><span style="color:#e6db74">/src/*.cpp</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># 打印头文件和源代码文件
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Header files: ${HEADER_FILES}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Source files: ${SOURCE_FILES}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># 添加可执行文件
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>add_executable(<span style="color:#e6db74">MyProject</span> <span style="color:#f92672">${</span>SOURCE_FILES<span style="color:#f92672">}</span> <span style="color:#f92672">${</span>HEADER_FILES<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># 包含头文件目录
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>target_include_directories(<span style="color:#e6db74">MyProject</span> <span style="color:#e6db74">PRIVATE</span> <span style="color:#f92672">${</span>CMAKE_SOURCE_DIR<span style="color:#f92672">}</span><span style="color:#e6db74">/include</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h3 id="解释">解释</h3>
<ol>
<li>
<p><strong>项目配置</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>cmake_minimum_required(<span style="color:#e6db74">VERSION</span> <span style="color:#e6db74">3.10</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>project(<span style="color:#e6db74">MyProject</span> <span style="color:#e6db74">VERSION</span> <span style="color:#e6db74">1.0</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div></li>
<li>
<p><strong>设置C++标准</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>set(<span style="color:#e6db74">CMAKE_CXX_STANDARD</span> <span style="color:#e6db74">11</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>set(<span style="color:#e6db74">CMAKE_CXX_STANDARD_REQUIRED</span> <span style="color:#e6db74">True</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div></li>
<li>
<p><strong>获取头文件</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>file(<span style="color:#e6db74">GLOB_RECURSE</span> <span style="color:#e6db74">HEADER_FILES</span> <span style="color:#f92672">${</span>CMAKE_SOURCE_DIR<span style="color:#f92672">}</span><span style="color:#e6db74">/include/MyProject/*.h</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p><code>file(GLOB_RECURSE ...)</code> 命令会递归地获取 <code>include/MyProject/</code> 目录下的所有 <code>.h</code> 文件，并将它们存储在 <code>HEADER_FILES</code> 变量中。</p>
</li>
<li>
<p><strong>获取源代码文件</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>file(<span style="color:#e6db74">GLOB_RECURSE</span> <span style="color:#e6db74">SOURCE_FILES</span> <span style="color:#f92672">${</span>CMAKE_SOURCE_DIR<span style="color:#f92672">}</span><span style="color:#e6db74">/src/*.cpp</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p><code>file(GLOB_RECURSE ...)</code> 命令会递归地获取 <code>src/</code> 目录下的所有 <code>.cpp</code> 文件，并将它们存储在 <code>SOURCE_FILES</code> 变量中。</p>
</li>
<li>
<p><strong>打印头文件和源代码文件</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Header files: ${HEADER_FILES}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Source files: ${SOURCE_FILES}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p>使用 <code>message()</code> 命令来输出这些文件列表，以便调试和验证。</p>
</li>
<li>
<p><strong>添加可执行文件</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>add_executable(<span style="color:#e6db74">MyProject</span> <span style="color:#f92672">${</span>SOURCE_FILES<span style="color:#f92672">}</span> <span style="color:#f92672">${</span>HEADER_FILES<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p>将获取到的源文件和头文件传递给 <code>add_executable()</code> 命令，创建一个名为 <code>MyProject</code> 的可执行文件。</p>
</li>
<li>
<p><strong>包含头文件目录</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>target_include_directories(<span style="color:#e6db74">MyProject</span> <span style="color:#e6db74">PRIVATE</span> <span style="color:#f92672">${</span>CMAKE_SOURCE_DIR<span style="color:#f92672">}</span><span style="color:#e6db74">/include</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p>使用 <code>target_include_directories()</code> 命令将 <code>include</code> 目录添加到编译器的头文件搜索路径中。</p>
</li>
</ol>
<h3 id="其他注意事项">其他注意事项</h3>
<ul>
<li>
<p><strong>使用 <code>file(GLOB ...)</code></strong>:</p>
<ul>
<li><code>file(GLOB ...)</code> 是一种方便的方式来获取文件列表，但并不是动态的。如果你添加或删除文件，需要重新运行 CMake。</li>
<li>对于更复杂的项目，建议手动维护文件列表，以确保CMake配置文件的可读性和可维护性。</li>
</ul>
</li>
<li>
<p><strong>手动维护文件列表</strong>:</p>
<ul>
<li>你可以手动列出所有源文件和头文件，而不是使用 <code>file(GLOB ...)</code>。<strong>这在大型项目中尤其常见</strong>，因为它使文件变动更加明确。</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>set(<span style="color:#e6db74">HEADER_FILES</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">${</span>CMAKE_SOURCE_DIR<span style="color:#f92672">}</span><span style="color:#e6db74">/include/MyProject/header1.h</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">${</span>CMAKE_SOURCE_DIR<span style="color:#f92672">}</span><span style="color:#e6db74">/include/MyProject/header2.h</span>
</span></span><span style="display:flex;"><span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>set(<span style="color:#e6db74">SOURCE_FILES</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">${</span>CMAKE_SOURCE_DIR<span style="color:#f92672">}</span><span style="color:#e6db74">/src/main.cpp</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">${</span>CMAKE_SOURCE_DIR<span style="color:#f92672">}</span><span style="color:#e6db74">/src/source1.cpp</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">${</span>CMAKE_SOURCE_DIR<span style="color:#f92672">}</span><span style="color:#e6db74">/src/source2.cpp</span>
</span></span><span style="display:flex;"><span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>add_executable(<span style="color:#e6db74">MyProject</span> <span style="color:#f92672">${</span>SOURCE_FILES<span style="color:#f92672">}</span> <span style="color:#f92672">${</span>HEADER_FILES<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p>通过上述方式，你可以有效地管理你的头文件和源代码文件，并确保CMake能够正确找到和使用它们。</p>
<h1 id="others">Others</h1>
<h2 id="1fileglob-和fileglob_recurse有什么区别">1、file(GLOB 和file(GLOB_RECURSE有什么区别</h2>
<p><code>file(GLOB ...)</code> 和 <code>file(GLOB_RECURSE ...)</code> 是 CMake 中用于获取文件列表的两个命令，它们之间的主要区别在于是否递归地搜索子目录。</p>
<h3 id="fileglob-"><code>file(GLOB ...)</code></h3>
<ul>
<li>
<p><strong>功能</strong>: 获取匹配特定模式的文件列表，不递归搜索子目录。</p>
</li>
<li>
<p><strong>用法</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>file(<span style="color:#e6db74">GLOB</span> <span style="color:#e6db74">&lt;variable&gt;</span> <span style="color:#e6db74">[RELATIVE</span> <span style="color:#e6db74">&lt;path&gt;]</span> <span style="color:#e6db74">[globbing</span> <span style="color:#e6db74">expressions]...</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div></li>
<li>
<p><strong>参数</strong>:</p>
<ul>
<li><code>&lt;variable&gt;</code>: 存储结果的变量。</li>
<li><code>[RELATIVE &lt;path&gt;]</code>: 如果指定，这个路径将作为结果列表中每个文件的相对路径的基准。</li>
<li><code>[globbing expressions]...</code>: 匹配文件的模式（如 <code>*.cpp</code>、<code>*.h</code>）。</li>
</ul>
</li>
<li>
<p><strong>示例</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>file(<span style="color:#e6db74">GLOB</span> <span style="color:#e6db74">SOURCE_FILES</span> <span style="color:#f92672">${</span>CMAKE_SOURCE_DIR<span style="color:#f92672">}</span><span style="color:#e6db74">/src/*.cpp</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p>这个命令将获取 <code>src</code> 目录下所有 <code>.cpp</code> 文件，但不包括子目录中的文件。</p>
</li>
</ul>
<h3 id="fileglob_recurse-"><code>file(GLOB_RECURSE ...)</code></h3>
<ul>
<li>
<p><strong>功能</strong>: 递归地获取匹配特定模式的文件列表，包括所有子目录。</p>
</li>
<li>
<p><strong>用法</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>file(<span style="color:#e6db74">GLOB_RECURSE</span> <span style="color:#e6db74">&lt;variable&gt;</span> <span style="color:#e6db74">[RELATIVE</span> <span style="color:#e6db74">&lt;path&gt;]</span> <span style="color:#e6db74">[FOLLOW_SYMLINKS]</span> <span style="color:#e6db74">[globbing</span> <span style="color:#e6db74">expressions]...</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div></li>
<li>
<p><strong>参数</strong>:</p>
<ul>
<li><code>&lt;variable&gt;</code>: 存储结果的变量。</li>
<li><code>[RELATIVE &lt;path&gt;]</code>: 如果指定，这个路径将作为结果列表中每个文件的相对路径的基准。</li>
<li><code>[FOLLOW_SYMLINKS]</code>: 如果指定，将跟随符号链接。</li>
<li><code>[globbing expressions]...</code>: 匹配文件的模式（如 <code>*.cpp</code>、<code>*.h</code>）。</li>
</ul>
</li>
<li>
<p><strong>示例</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>file(<span style="color:#e6db74">GLOB_RECURSE</span> <span style="color:#e6db74">SOURCE_FILES</span> <span style="color:#f92672">${</span>CMAKE_SOURCE_DIR<span style="color:#f92672">}</span><span style="color:#e6db74">/src/*.cpp</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p>这个命令将获取 <code>src</code> 目录及其所有子目录中的所有 <code>.cpp</code> 文件。</p>
</li>
</ul>
<h3 id="使用示例">使用示例</h3>
<p>假设项目目录结构如下：</p>
<pre tabindex="0"><code>MyProject/
├── CMakeLists.txt
├── src/
│   ├── main.cpp
│   ├── utils/
│   │   └── helper.cpp
│   └── components/
│       └── component.cpp
</code></pre><h4 id="使用-fileglob-">使用 <code>file(GLOB ...)</code></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>cmake_minimum_required(<span style="color:#e6db74">VERSION</span> <span style="color:#e6db74">3.10</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>project(<span style="color:#e6db74">MyProject</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># 获取 src 目录下的所有 .cpp 文件，不包括子目录中的文件
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>file(<span style="color:#e6db74">GLOB</span> <span style="color:#e6db74">SOURCE_FILES</span> <span style="color:#f92672">${</span>CMAKE_SOURCE_DIR<span style="color:#f92672">}</span><span style="color:#e6db74">/src/*.cpp</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># 打印获取到的文件列表
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Source files: ${SOURCE_FILES}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>add_executable(<span style="color:#e6db74">MyProject</span> <span style="color:#f92672">${</span>SOURCE_FILES<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p>输出可能为：</p>
<pre tabindex="0"><code>-- Source files: /path/to/MyProject/src/main.cpp
</code></pre><h4 id="使用-fileglob_recurse-">使用 <code>file(GLOB_RECURSE ...)</code></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span>cmake_minimum_required(<span style="color:#e6db74">VERSION</span> <span style="color:#e6db74">3.10</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>project(<span style="color:#e6db74">MyProject</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># 递归获取 src 目录及其子目录中的所有 .cpp 文件
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>file(<span style="color:#e6db74">GLOB_RECURSE</span> <span style="color:#e6db74">SOURCE_FILES</span> <span style="color:#f92672">${</span>CMAKE_SOURCE_DIR<span style="color:#f92672">}</span><span style="color:#e6db74">/src/*.cpp</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># 打印获取到的文件列表
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>message(<span style="color:#e6db74">STATUS</span> <span style="color:#e6db74">&#34;Source files: ${SOURCE_FILES}&#34;</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>add_executable(<span style="color:#e6db74">MyProject</span> <span style="color:#f92672">${</span>SOURCE_FILES<span style="color:#f92672">}</span>)<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p>输出可能为：</p>
<pre tabindex="0"><code>-- Source files: /path/to/MyProject/src/main.cpp;/path/to/MyProject/src/utils/helper.cpp;/path/to/MyProject/src/components/component.cpp
</code></pre><h3 id="选择-fileglob--还是-fileglob_recurse-">选择 <code>file(GLOB ...)</code> 还是 <code>file(GLOB_RECURSE ...)</code></h3>
<ul>
<li>
<p><strong>使用 <code>file(GLOB ...)</code></strong>:</p>
<ul>
<li>当你只需要获取某个特定目录中的文件，而不需要递归搜索子目录时。</li>
<li>适用于文件层次结构较简单的项目。</li>
</ul>
</li>
<li>
<p><strong>使用 <code>file(GLOB_RECURSE ...)</code></strong>:</p>
<ul>
<li>当你需要递归地获取目录及其所有子目录中的文件时。</li>
<li>适用于文件层次结构较复杂的项目，或者你希望自动包含所有子目录中的文件。</li>
</ul>
</li>
</ul>
<h3 id="注意事项">注意事项</h3>
<ul>
<li><code>file(GLOB ...)</code> 和 <code>file(GLOB_RECURSE ...)</code> 获取的文件列表不会动态更新。如果添加或删除了文件，需要重新运行 CMake 来更新文件列表。</li>
<li>在大型项目中，手动维护文件列表可能会更加清晰和可控。使用 <code>file(GLOB ...)</code> 和 <code>file(GLOB_RECURSE ...)</code> 的自动化方式虽然方便，但可能会使项目结构的变动不够显式。</li>
</ul>
<p>通过了解 <code>file(GLOB ...)</code> 和 <code>file(GLOB_RECURSE ...)</code> 的区别及其使用场景，可以更有效地管理和配置 CMake 项目中的文件。</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="/" >
    &copy; 
  </a>
    <div>
<div class="ananke-socials">
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
